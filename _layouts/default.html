<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Test Jekyll Assets</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <!-- Loop CSS files: -->
        {% for i in (1..3) %}
            {% capture filename %}css/file{{ i }}.css{% endcapture %}
            <!-- {{ filename }} -->
            {% asset '{{ filename }}' %}
        {% endfor %}
        <!-- END LOOP -->
        
    </head>
    
    <body>
        <main>
            <!-- Loop IMAGE files: -->
            {% for i in (1..3) %}
                {% capture filename %}img/file{{ i }}.jpg{% endcapture %}
                <!-- {{ filename }} -->
                
                <!-- Regular <img> tag, no problem at all: -->
                {% asset '{{ filename }}' %}
                
                <!-- Ok, now with ImageMagick. Look at the digest path, it's always the same, ie. the first one in the loop: -->
                {% asset '{{ filename }}' magick:resize='300' %}
            {% endfor %}
            <!-- END LOOP -->
            
            {{ content }}
        </main>
        
        
        <!-- Loop JS files: -->
        {% for i in (1..3) %}
            {% capture filename %}js/file{{ i }}.js{% endcapture %}
            <!-- {{ filename }} -->
            {% asset '{{ filename }}' %}
        {% endfor %}
        <!-- END LOOP -->
    </body>
</html>